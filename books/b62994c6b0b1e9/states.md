---
title: "状態: コンポーネントの見え方を網羅する"
---

デザインするとき、データが完璧に入った理想的な状態を中心に描くのは自然なことです。しかし、コンポーネントを実装するときに必要になるのは、すべての状態の定義です。状態の設計が抜けていると、リリース直前にエンジニアから「この状態のデザインがない」と差し戻されることになります。

この章では、データの有無に関わる状態（UIスタック）と、ユーザー操作に伴う状態（インタラクション状態）の2つを整理します。

# UIスタック: データの有無による5つの状態

こうしたものは往々にしてエンジニアがヌケモレを教えてくれることが多いのですが、リリース直前であまりきちんとデザインできなかったという経験はよくあるのではないかと思います。

[Scott Hurff](https://www.scotthurff.com/posts/why-your-user-interface-is-awkward-youre-ignoring-the-ui-stack/)が提唱したUIスタックという概念では、UIには以下の5つの状態があるとされています。

1. `Ideal State`: データが完璧に入った状態。Figmaで最初にデザインする状態
2. `Empty State`: データが空の状態。リストが0件のとき、`Avatar`の画像がないとき
3. `Loading State`: 読み込み中。スケルトンスクリーンやスピナー
4. `Partial State`: データが不完全な状態。ユーザー名はあるけどアイコンがない、商品情報はあるが画像が未登録、など
5. `Error State`: 読み込み失敗やバリデーションエラー

![UIの5つの状態と遷移](https://raw.githubusercontent.com/yasuhiro-y/component-design-guide-for-designers/main/illustrations/output/fig-07.png)

新しいコンポーネントを設計するとき、これら5つの状態をすべて定義してから実装に渡してください。

この5つの状態の区別は、見た目が似たコンポーネントを分離する根拠にもなります。

MUIでは、ユーザーへのフィードバックという同じ目的を持ちながら、[`Alert`](https://mui.com/material-ui/react-alert/)（ページ内に常駐するお知らせ欄）、[`Snackbar`](https://mui.com/material-ui/react-snackbar/)（画面下部に一瞬だけ出る通知。トーストとも呼ばれます）、[`Dialog`](https://mui.com/material-ui/react-dialog/)（操作を中断して確認を求めるモーダル）を別々のコンポーネントとして提供しています。

`Alert`は`Error State`や`Partial State`の表示手段、`Snackbar`は操作完了後の一時通知、`Dialog`は操作前の確認。見た目が似ていても、UIスタックのどの層で使われるかが違えば、コンポーネントとして分けるのが自然です。

ユーザーカードや求人リストなどのドメインコンポーネントでは、これらの状態をあらかじめ定義しておく必要があります。読み込み中、データが空、エラーといった状態ごとの見た目をFigmaのバリアントとしてデザインしておきます。たとえば、`state` というバリアント軸に `ideal` / `empty` / `loading` / `error` を用意する方法が一般的です。

成功したときの理想的な画面だけでなく、失敗時やデータ欠損時の見た目もコンポーネントの仕様に含めておくと、実装時にこの状態のデザインがないという差し戻しがなくなります。
そして、用意されているにしてもコンポーネントや画面ごとに明確な基準なく揺れがちなポイントです。コンポーネント設計のチェックリストに組み込んだり、パターンを策定しておくとよいでしょう。

## Partial State: もっとも見落としやすい状態

特に`Partial State`はデザイナーが最も見落としやすい状態です。`Ideal State`と`Empty State`は意識しやすい——データがあるか、ないか。しかし現実のデータはある/ないの二択ではなく、一部だけあることのほうが圧倒的に多いのです。

たとえば、ユーザープロフィールカードで考えてみてください。ユーザー名はあるがプロフィール画像を登録していない。評価スコアはあるがレビュー件数が0件。自己紹介文は入力されているが、スキルタグが未設定。

これらの組み合わせは膨大です。すべてをデザインするのは現実的ではありませんが、少なくとも各データ項目が欠けたとき、その領域をどう扱うかのルールは決めておく必要があります。

実践的な対処としては、データ項目ごとにフォールバック（代替表示）を定義しておくことです。

![Partial State: データ欠損時のフォールバック](https://raw.githubusercontent.com/yasuhiro-y/component-design-guide-for-designers/main/illustrations/output/fig-35.png)

| データ項目       | 欠損時の代替表示   |
| ---------------- | ------------------ |
| プロフィール画像 | イニシャルアイコン |
| 評価スコア       | 「—」を表示        |
| 自己紹介文       | 領域ごと詰める     |
| スキルタグ       | セクション非表示   |

こうしたルールがコンポーネントの仕様に含まれていれば、データが欠けても画面が壊れません。

## プロパティと状態の違い

ここでひとつ、デザイナーが混乱しやすいポイントがあります。

UIスタックで扱っている `Loading` や `Error` は、コンポーネントの状態です。これは前の章で扱った外から渡す設定値（プロパティ）とは性質が異なります。

違いを日常に置き換えてみます。信号機でいえば、この信号機は車道用であるというのが外から設定されるプロパティです。一方、いま赤か青かはその信号機自身が切り替える状態です。

Figma上では、プロパティもバリアントとして表現されます。しかしコードでは、外から渡す設定値（`props`）とコンポーネント自身が管理する状態（`state`）は明確に区別されます。

この区別をFigma上でも見分けやすくするために、状態を表すプロパティに目印をつけておくのが有効です。たとえば、`_state` や `_isLoading` のように `_` プレフィックスをつけて命名しておけば、外から渡す設定値なのかコンポーネント内部の状態なのかが一目でわかり、デザインと実装の間の認識のズレを防げます。

ここまで扱った `Loading` や `Error` はシステム側の状態——データの有無やAPIの成否によって決まるものでした。コンポーネントにはもうひとつ、ユーザーの操作に伴う見た目の変化があります。これもまた状態の一種ですが、性質が異なるので分けて整理します。

# インタラクション状態: ユーザーの操作に応じた見た目の変化

ボタンの上にマウスカーソルを乗せたとき、押し込んでいるとき、操作できない状態のとき。これらはそれぞれ `Hover`、`Pressed`、`Disabled` と呼ばれます。Figmaでは `Interactive Components` の機能で表現できます。

ボタンのインタラクションには「弧（arc）」があります。default → hover → focused → pressed → waiting（[Curtis, 2016](https://medium.com/eightshapes-llc/buttons-in-design-systems-eac3acf7e23)）。この一連の流れを切れ目なくデザインすることが、ボタンのインタラクション品質を決めます。

ここで大事なのは、こうしたインタラクション状態のルールをコンポーネントごとに個別に決めないことです。`Hover`時は現在の背景色に対してオーバーレイを8%重ねる、`Disabled`時は`opacity`を38%に下げる——こうしたルールをトークンとして一元管理しておけば、新しいコンポーネントを作るときにゼロから設計する必要がなくなります。[Material Design 3のState Layers](https://m3.material.io/foundations/interaction/states/state-layers)がこの考え方の参考になります。

デザイナーが見落としがちなのがフォーカス状態です。マウスを使わずキーボードのTabキーで画面を操作するユーザーにとって、いまどの要素にフォーカスがあるかを示すフォーカスリング（枠線）は不可欠な手がかりです。フォーカスリングの色、太さ、オフセットをコンポーネント横断で統一しておくことが重要です。

すべてのインタラクティブなコンポーネントに対して、`Hover`、`Pressed`、`Disabled`、`Focus`の見た目を定義しておくと、実装の抜け漏れが減り、操作方法を問わず一貫した体験を提供できます。

![インタラクション状態: 5つの見た目を統一ルールで管理する](https://raw.githubusercontent.com/yasuhiro-y/component-design-guide-for-designers/main/illustrations/output/fig-29.png)
